<Window x:Class="LePhungHa_8991.View.QuanLyDatPhong"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LePhungHa_8991.View"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        Title="Quản Lý Đặt Phòng" Height="750" Width="1300">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="QUẢN LÝ ĐẶT PHÒNG" FontSize="28" FontWeight="Bold" 
                   Foreground="#FF9800" HorizontalAlignment="Center" Margin="0,0,0,20"/>

        <Border Grid.Row="1" Background="White" CornerRadius="10" Padding="20" Margin="0,0,0,20">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <Label Content="Mã Đặt Phòng:" FontWeight="Bold"/>
                    <TextBox x:Name="txt_MaDatPhong" Height="35" Padding="5" FontSize="14"/>
                    
                    <Label Content="Khách Hàng:" FontWeight="Bold" Margin="0,10,0,0"/>
                    <ComboBox x:Name="cbo_KhachHang" Height="35" 
                             DisplayMemberPath="HoTen" 
                             SelectedValuePath="ID_KH"
                             FontSize="14"/>
                    
                    <Label Content="Phòng:" FontWeight="Bold" Margin="0,10,0,0"/>
                    <ComboBox x:Name="cbo_Phong" Height="35" 
                             DisplayMemberPath="TenPhong" 
                             SelectedValuePath="MaPhong"
                             SelectionChanged="cbo_Phong_SelectionChanged"
                             FontSize="14"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="10,0">
                    <Label Content="Ngày Nhận Phòng:" FontWeight="Bold"/>
                    <DatePicker x:Name="dp_NgayNhan" Height="35" FontSize="14"
                               SelectedDateChanged="dp_NgayNhan_SelectedDateChanged"/>
                    
                    <Label Content="Ngày Trả Phòng:" FontWeight="Bold" Margin="0,10,0,0"/>
                    <DatePicker x:Name="dp_NgayTra" Height="35" FontSize="14"
                               SelectedDateChanged="dp_NgayTra_SelectedDateChanged"/>
                    
                    <Label Content="Số Người:" FontWeight="Bold" Margin="0,10,0,0"/>
                    <TextBox x:Name="txt_SoNguoi" Height="35" Padding="5" FontSize="14" Text="1"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Margin="10,0,0,0">
                    <Label Content="Tiền Cọc:" FontWeight="Bold"/>
                    <TextBox x:Name="txt_TienCoc" Height="35" Padding="5" FontSize="14" Text="0"/>
                    
                    <Label Content="Tổng Tiền:" FontWeight="Bold" Margin="0,10,0,0"/>
                    <TextBox x:Name="txt_TongTien" Height="35" Padding="5" FontSize="14" Text="0" IsReadOnly="True" Background="#F0F0F0"/>
                    
                    <Label Content="Trạng Thái:" FontWeight="Bold" Margin="0,10,0,0"/>
                    <ComboBox x:Name="cbo_TrangThai" Height="35" FontSize="14">
                        <ComboBoxItem Content="Đã đặt" IsSelected="True"/>
                        <ComboBoxItem Content="Đã nhận phòng"/>
                        <ComboBoxItem Content="Đã trả phòng"/>
                        <ComboBoxItem Content="Đã hủy"/>
                    </ComboBox>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.ColumnSpan="3" Margin="0,10,0,0">
                    <Label Content="Ghi Chú:" FontWeight="Bold"/>
                    <TextBox x:Name="txt_GhiChu" Height="50" Padding="5" FontSize="14" 
                            TextWrapping="Wrap" AcceptsReturn="True"/>
                </StackPanel>

                <StackPanel Grid.Row="3" Grid.ColumnSpan="3" Orientation="Horizontal" 
                           HorizontalAlignment="Center" Margin="0,20,0,0">
                    <Button Content="Thêm" Click="Them_Click" Width="100" Height="40" 
                           Margin="5" Background="#4CAF50" Foreground="White" 
                           FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
                    <Button Content="Sửa" Click="Sua_Click" Width="100" Height="40" 
                           Margin="5" Background="#2196F3" Foreground="White" 
                           FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
                    <Button Content="Xóa" Click="Xoa_Click" Width="100" Height="40" 
                           Margin="5" Background="#F44336" Foreground="White" 
                           FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
                    <Button Content="Làm Mới" Click="LamMoi_Click" Width="100" Height="40" 
                           Margin="5" Background="#FF9800" Foreground="White" 
                           FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
                    <Button Content="Tính Tiền" Click="TinhTien_Click" Width="100" Height="40" 
                           Margin="5" Background="#9C27B0" Foreground="White" 
                           FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                <TextBox x:Name="txt_TimKiem" Width="250" Height="35" 
                        Padding="5" FontSize="14" Text="Tìm kiếm..."/>
                <Button Content="🔍 Tìm Kiếm" Click="TimKiem_Click" Width="100" Height="35" 
                       Margin="10,0" Background="#9C27B0" Foreground="White" 
                       FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
                <Label Content="Từ ngày:" FontWeight="Bold" VerticalAlignment="Center" Margin="20,0,5,0"/>
                <DatePicker x:Name="dp_TuNgay" Width="130" Height="35" FontSize="14"/>
                <Label Content="Đến ngày:" FontWeight="Bold" VerticalAlignment="Center" Margin="10,0,5,0"/>
                <DatePicker x:Name="dp_DenNgay" Width="130" Height="35" FontSize="14"/>
                <Button Content="Lọc" Click="Loc_Click" Width="80" Height="35" 
                       Margin="10,0" Background="#607D8B" Foreground="White" 
                       FontWeight="Bold" BorderThickness="0" Cursor="Hand"/>
            </StackPanel>

            <DataGrid x:Name="dgv_DatPhong" Grid.Row="1" 
                     AutoGenerateColumns="False" 
                     IsReadOnly="True"
                     SelectionMode="Single"
                     SelectionChanged="dgv_DatPhong_SelectionChanged"
                     CanUserAddRows="False"
                     Background="White">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Mã ĐP" Binding="{Binding MaDatPhong}" Width="80"/>
                    <DataGridTextColumn Header="Khách Hàng" Binding="{Binding KHACHHANG.HoTen}" Width="*"/>
                    <DataGridTextColumn Header="Phòng" Binding="{Binding PHONG.TenPhong}" Width="100"/>
                    <DataGridTextColumn Header="Ngày Nhận" Binding="{Binding NgayNhanPhong, StringFormat=dd/MM/yyyy}" Width="100"/>
                    <DataGridTextColumn Header="Ngày Trả" Binding="{Binding NgayTraPhong, StringFormat=dd/MM/yyyy}" Width="100"/>
                    <DataGridTextColumn Header="Số Người" Binding="{Binding SoNguoi}" Width="80"/>
                    <DataGridTextColumn Header="Tiền Cọc" Binding="{Binding TienCoc, StringFormat=N0}" Width="100"/>
                    <DataGridTextColumn Header="Tổng Tiền" Binding="{Binding TongTien, StringFormat=N0}" Width="120"/>
                    <DataGridTextColumn Header="Trạng Thái" Binding="{Binding TrangThai}" Width="120"/>
                </DataGrid.Columns>
            </DataGrid>

            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,10,0,0">
                <TextBlock Text="Tổng số đặt phòng: " FontWeight="Bold" FontSize="14"/>
                <TextBlock x:Name="txt_TongSo" Text="0" FontWeight="Bold" 
                          FontSize="14" Foreground="#FF9800" Margin="5,0"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
